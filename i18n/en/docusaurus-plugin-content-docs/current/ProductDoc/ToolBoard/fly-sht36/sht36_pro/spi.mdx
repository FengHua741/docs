---
sidebar_position: 8
sidebar_label: SPI usage unresolved issues
---

# On-board 5160 driver not working

    ```bash
    Unable to write tmc spi 'extruder' register IHOLD_IRUN
    ```

## Specific reasons

    * If using 5160, the following error occurs due to an issue with the upper-level machine Arm toolchain version `arm-none-eabi-gcc`

## Solution
    There are three solutions:

    * Switch the compilation toolchain `arm-none-eabi-gcc` from `gcc10` to `gcc8`
    * Replace the upper-level machine system
    * Flash a firmware that works properly

    For firmware download and flashing, please note that the tool board must be able to connect CAN normally and have CANBOOT.

    * Download

    ```bash
    cd ~/ && git clone https://github.com/FengHua741/FLY_Katapult.git
    ```
    * Flash

    ```
    python3 ~/klipper/lib/canboot/flash_can.py -f ~/FLY_Katapult/Klipper/SHT36PRO/SHT36PRO_KLIPPER_CAN-1M_v0.12.0-229-g589bd64c.bin -u <SHT36PRO_canid>
    ```